{"version":3,"sources":["webpack:///webpack/bootstrap 2b89fa200886b2a2f839","webpack:///./jsx/home.jsx","webpack:///./jsx/draggableList.jsx"],"names":["DraggableList","require","Content","React","createClass","sectionClick","sectionId","setState","selected","getInitialState","sections","loading","componentDidMount","getData","content","JSON","parse","$","html","state","i","length","isParent","id","reOrderPages","sectionIndex","index1","index2","newSections","swapTemp","pages","newIndex","update","reOrderedPages","filter","page","ajax","type","url","data","stringify","processData","contentType","success","jsonContent","bind","timeout","alert","failure","errMsg","render","loaderClass","map","section","index","Controls","props","name","visible","SectionSwitch","click","onClick","className","Page","window","location","href","other","log","dragProps","PageList","addPage","updatePageOrder","ReactDOM","document","getElementById","propTypes","onReOrder","PropTypes","func","isRequired","onDrop","string","defaultProps","dragstart","e","target","style","opacity","draggedIndex","dragover","thisRect","getBoundingClientRect","clientY","dragend","childrenWithProps","Children","children","child","cloneElement","onDragStart","onDragOver","onDragEnd","draggable","module","exports"],"mappings":"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","file":"home.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2b89fa200886b2a2f839\n **/","var DraggableList = require('./draggableList.jsx');\r\n\r\n\r\nvar Content = React.createClass({\r\n\tsectionClick: function(sectionId) {\r\n\t\tthis.setState({\r\n\t\t\tselected: sectionId\r\n\t\t});\r\n\t},\r\n\tgetInitialState: function() {\r\n\t\treturn({\r\n\t\t\tsections: [],\r\n\t\t\tselected: 0,\r\n\t\t\tloading: true\r\n\t\t})\r\n\t},\r\n\tcomponentDidMount: function() {\r\n\t\tthis.getData();\r\n\t},\r\n\tgetData: function() {\r\n\t\t// get the content\t    \t\r\n    \tvar content = JSON.parse($(\"#contentJSON\").html());\r\n\r\n    \t//set the first section as selected\r\n    \tvar selected;\r\n\r\n    \tif(this.state.selected == 0) {\t//if nothings selected, select the first section\r\n\t    \tfor (var i = 0; i < content.length; i++) {\r\n\t    \t\tif(content[i].isParent) {\r\n\t    \t\t\tselected = content[i].id;\r\n\t    \t\t\tbreak;\r\n\t    \t\t}\r\n\t    \t}\r\n    \t} else {\r\n    \t\tselected = this.state.selected;\r\n    \t}\r\n    \tthis.setState({\r\n      \t\tsections: content,\r\n      \t\tselected: selected,\r\n      \t\tloading: false\r\n      \t});\r\n\t},\r\n\treOrderPages: function(sectionIndex, index1, index2) {\r\n\r\n\t\tvar newSections = this.state.sections;\r\n\r\n\t\t// swap the indexes\r\n\t\tvar swapTemp = newSections[sectionIndex].pages[index1];\r\n\t\tnewSections[sectionIndex].pages[index1] = newSections[sectionIndex].pages[index2];\r\n\t\tnewSections[sectionIndex].pages[index2] = swapTemp;\r\n\r\n\t\t// explicitly set a new index property equal to the new index\r\n\t\tnewSections[sectionIndex].pages[index1].newIndex = index1;\r\n\t\tnewSections[sectionIndex].pages[index2].newIndex = index2;\r\n\r\n\t\tthis.setState({\r\n\t\t\tsections: newSections\r\n\t\t})\r\n\t\t\r\n\t},\r\n\tupdate: function(sectionIndex) {\r\n\t\tif(this.state.loading) return false;\t//stop double update\r\n\t\tthis.setState({\r\n\t\t\tloading: true\r\n\t\t});\r\n\t\tvar reOrderedPages = this.state.sections[sectionIndex].pages.filter(function(page) {\r\n\t\t\treturn page.newIndex > -1;\r\n\t\t})\r\n\r\n\t\t$.ajax({\r\n\t\t    type: \"PUT\",\r\n\t\t    url: \"/\",\r\n\t\t    // The key needs to match your method's input parameter (case-sensitive).\r\n\t\t    data: JSON.stringify(reOrderedPages),\r\n\t\t\tprocessData: false,\r\n\t\t\tcontentType: \"application/json; charset=utf-8\",\r\n\t\t\t// if the update is successful it returns the newly updated content\r\n\t\t    success: function(jsonContent) {\r\n\t\t    \tvar content = JSON.parse(jsonContent);\r\n\t\t    \tthis.setState({\r\n\t\t    \t\tcontent: content,\r\n\t\t    \t\tloading: false\r\n\t\t    \t})\r\n\t\t    }.bind(this),\r\n\t\t    timeout: function() {\r\n\t\t    \talert('timeout!');\r\n\t\t    },\r\n\t\t    failure: function(errMsg) {\r\n\t\t        alert(errMsg);\r\n\t\t    }\r\n\t\t});\r\n\t},\r\n\trender: function() {\r\n\t\tvar loaderClass = this.state.loading ? 'loading' : '';\r\n\t\treturn(\r\n\t\t\t<div className='wrapper'>\r\n\t\t\t\t<Controls sections={this.state.sections} selected={this.state.selected} sectionClick={this.sectionClick} />\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.sections.map(function(section, index) {\r\n\t\t\t\t\t\tif(section.isParent) {\r\n\t\t\t\t\t\t\treturn <PageList key={section.id} index={index} id={section.id} selected={section.id == this.state.selected} \r\n\t\t\t\t\t\t\tpages={section.pages} reOrderPages={this.reOrderPages} updatePageOrder={this.update} />\r\n\t\t\t\t\t\t}\r\n\t\t\t\t \t}.bind(this))\r\n\t\t\t\t}\r\n\t\t\t\t<div id='loader' className={loaderClass}></div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nvar Controls = React.createClass({\r\n\trender: function() {\r\n\t\treturn(\r\n\t\t\t<div className='controls'>\r\n\t\t\t<h1>Sections</h1>\r\n\r\n\t\t\t{\r\n\t\t\t\tthis.props.sections.map(function(section) {\r\n\t\t\t\t\tif(section.isParent) {\r\n\t\t\t\t\t\treturn <SectionSwitch key={section.id} id={section.id} selected={section.id == this.props.selected} \r\n\t\t\t\t\t\tname={section.name} onClick={this.props.sectionClick} />\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn <Page key={section.id} id={section.id} className='page' name={section.name} visible={section.visible} />\r\n\t\t\t\t\t}\r\n\t\t\t \t}.bind(this))\r\n\t\t    }\r\n\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nvar SectionSwitch = React.createClass({\r\n\t//validate props\r\n\t//handle click\r\n\tclick: function() {\r\n\t\tthis.props.onClick(this.props.id);\r\n\t},\r\n\trender: function() {\r\n\t\tvar className = (this.props.selected) ? 'section selected' : 'section'; \r\n\t\treturn(\r\n\t\t\t<h5 id={this.props.id} className={className} onClick={this.click}>{this.props.name}</h5>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nvar Page = React.createClass({\r\n\t//validate props\r\n\t//handle click\r\n\tclick: function() {\r\n\t\twindow.location.href = '/page?id=' + this.props.id;\r\n\t},\r\n\t\r\n\trender: function() {\r\n\t\tvar { visible, className, name, ...other } = this.props; //destructure the props\r\n\t\tconsole.log(...other);\r\n\t\tvar className = this.props.visible ? this.props.className : this.props.className + ' hidden';\r\n\t\treturn(\r\n\t\t\t<h5 {...this.props.dragProps} className={className} onClick={this.click}>{this.props.name}</h5>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nvar PageList = React.createClass({\r\n\taddPage: function() {\r\n\t\twindow.location.href = '/page?id=0&parent_id=' + this.props.id;\r\n\t},\r\n\treOrderPages: function(index1, index2) {\r\n\t\t// pass through the index of this page list so that we know which pages to re-order\r\n\t\tthis.props.reOrderPages(this.props.index, index1, index2);\r\n\t},\r\n\tupdatePageOrder: function() {\r\n\t\tthis.props.updatePageOrder(this.props.index);\r\n\t},\r\n\trender: function() {\t\t\r\n\t\tvar className = (this.props.selected) ? 'contentList selected' : 'contentList'; \r\n\t\treturn(\r\n\t\t\t<div className={className}>\r\n\t\t\t\t<p className='content add' onClick={this.addPage}>Create new page</p>\r\n\t\t\t\t<DraggableList onReOrder={this.reOrderPages} onDrop={this.updatePageOrder}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.pages.map(function(page) {\r\n\t\t\t\t\t\t\treturn <Page key={page.id} id={page.id} className='content page' name={page.name} visible={page.visible} />\r\n\t\t\t\t\t \t}.bind(this))\r\n\t\t\t\t\t}\r\n\t\t\t\t</DraggableList>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nReactDOM.render(<Content />, document.getElementById('container'));\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./jsx/home.jsx\n **/","// For this to work you need to add {...this.props.dragProps} to the childrens root node in their render method\r\n\r\nvar DraggableList = React.createClass({\r\n\tpropTypes: {\r\n\t\tonReOrder: React.PropTypes.func.isRequired,\r\n\t\tonDrop: React.PropTypes.func,\r\n\t\tclassName: React.PropTypes.string\r\n\t},\r\n\tdefaultProps: {\r\n\t\tclassName: ''\r\n\t},\r\n\tdragstart: function(index, e) {\r\n\t\te.target.style.opacity = 0.5;\r\n\t\tthis.draggedIndex = index;\r\n\t},\r\n\r\n\tdragover: function(index, e) {\r\n\t\tif(this.draggedIndex != null) {\r\n\t\t\tvar thisRect = e.target.getBoundingClientRect();\r\n\t\t\tif((e.clientY < thisRect['top'] + 0.5 * thisRect['height'] && this.draggedIndex > index) \r\n\t\t\t|| (e.clientY >= thisRect['top'] + 0.5 * thisRect['height'] && this.draggedIndex < index)) {\r\n\t\t\t\tthis.props.onReOrder(this.draggedIndex, index);\r\n\t\t\t\tthis.draggedIndex = index;\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tdragend: function(e) {\r\n\t\tif(this.draggedIndex != null) {\r\n\t\t\te.target.style.opacity = 1;\r\n\t\t\tthis.draggedIndex = null;\r\n\t\t}\r\n\t\tif(this.props.onDrop) {\r\n\t\t\tthis.props.onDrop();\r\n\t\t}\r\n\t},\r\n\trender: function() {\r\n\r\n\t\t//Add drag event props to children\r\n\t\tconst childrenWithProps = React.Children.map(this.props.children,\r\n\t\t\t(child, index) => React.cloneElement(child, {\r\n\t\t\t\tdragProps: {\r\n\t\t\t\t\tonDragStart: this.dragstart.bind(this, index), //\tchild.key?\t||\t\r\n\t\t\t\t\tonDragOver: this.dragover.bind(this, index), //\tchild.key?\t||\t\r\n\t\t\t\t\tonDragEnd: this.dragend,\r\n\t\t\t\t\tdraggable: 'true'\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t})\r\n\t    );\r\n\t\treturn(\r\n\t\t\t<div className={this.props.className}>{childrenWithProps}</div>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nmodule.exports = DraggableList;\n\n\n/** WEBPACK FOOTER **\n ** ./jsx/draggableList.jsx\n **/"],"sourceRoot":""}