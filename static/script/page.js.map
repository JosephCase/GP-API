{"version":3,"sources":["webpack:///webpack/bootstrap 1fc9a14ace70052f2b99","webpack:///./jsx/page.jsx","webpack:///./jsx/draggableList.jsx","webpack:///./jsx/Elems.jsx","webpack:///./jsx/toolBox.jsx"],"names":["DraggableList","require","TextElem","ImgElem","VideoElem","ImageUploadButton","PageWrapper","React","createClass","textSizes","imgSizes","videoFormats","ext","elemsAdded","getInitialState","elements","componentDidMount","formData","FormData","content","JSON","parse","$","html","setState","onChange","index","newElem","newElems","state","changeFile","id","file","set","onReOrderElems","index1","index2","swapTemp","position","instruction","getContent","addText","type","size","language","length","push","addImages","images","i","newId","reader","FileReader","readAsDataURL","onload","newImgLoaded","bind","e","target","result","submit","console","log","changes","filter","elem","pageId","document","getElementById","value","stringify","method","ajax","url","data","processData","contentType","error","errMsg","alert","render","map","ReactDOM","propTypes","onReOrder","PropTypes","func","isRequired","onDrop","className","string","defaultProps","dragstart","style","opacity","draggedIndex","dragover","thisRect","getBoundingClientRect","clientY","props","dragend","childrenWithProps","Children","children","child","cloneElement","dragProps","onDragStart","onDragOver","onDragEnd","draggable","module","exports","ElemMixin","onSizeChange","newDesc","elemDesc","onLangChange","onDelete","instruction_old","mixins","shape","number","oneOfType","sizeRange","array","findDOMNode","refs","textArea","focus","preventDefault","stopPropagation","deleteText","onFileUpload","tempImg","animate","scrollTop","RootElem","offset","top","onImgClick","siblings","click","loadingSrc","files","src","onVidClick","videoPlaceholder","displayElem","format","SizeSelect","range","LangSelect","onClick","fileInput"],"mappings":"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","file":"page.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1fc9a14ace70052f2b99\n **/","var DraggableList = require('./draggableList.jsx');\r\n\r\nvar TextElem = require('./Elems.jsx').TextElem;\r\nvar ImgElem = require('./Elems.jsx').ImgElem;\r\nvar VideoElem = require('./Elems.jsx').VideoElem;\r\nvar ImageUploadButton = require('./toolBox.jsx').ImageUploadButton;\r\n\r\nvar PageWrapper = React.createClass({\r\n\r\n\ttextSizes: [10,11,12,13,14,15,16,17,18,19,20],\t\r\n\timgSizes: [1,2,3,4],\r\n\tvideoFormats: [{ext: 'webm'}, {ext: 'mp4'}],\r\n\telemsAdded: 0,\r\n\r\n\tgetInitialState: function() {\r\n\t\treturn({\r\n\t\t\telements: []\r\n\t\t})\r\n\t},\r\n\tcomponentDidMount: function() {\r\n\r\n\t\tthis.formData = new FormData();\r\n\r\n\t\tvar content = JSON.parse($(\"#contentJSON\").html());\r\n\r\n\t\tthis.setState({\r\n\t\t\telements: content\r\n\t\t})\r\n\t},\r\n\r\n\tonChange: function(index, newElem) {\r\n\t\tvar newElems = this.state.elements;\r\n\t\tnewElems[index] = newElem;\r\n\t\tthis.setState({\r\n\t\t\telements: newElems\r\n\t\t});\r\n\t},\r\n\tchangeFile(id, file) {\r\n\r\n\t\t// add the file to the form data object, with the element id so that it can be referenced by the element on the server\r\n\t\tthis.formData.set(id, file);\r\n\r\n\r\n\t},\r\n\tonReOrderElems: function(index1, index2) {\r\n\t\tvar newElems = this.state.elements;\r\n\r\n\t\t// swap the indexes\r\n\t\tvar swapTemp = newElems[index1];\r\n\t\tnewElems[index1] = newElems[index2];\r\n\t\tnewElems[index2] = swapTemp;\r\n\r\n\t\t// explicitly set a new index property equal to the new index\r\n\t\tnewElems[index1].position = index1;\r\n\t\t// only add the edit instruction if the element doesn't already have an instruction (or if it's already edit)\r\n\t\tif(!newElems[index1].instruction) {\r\n\t\t\tnewElems[index1].instruction = 'edit';\r\n\t\t}\r\n\r\n\t\tnewElems[index2].position = index2;\r\n\t\t// only add the edit instruction if the element doesn't already have an instruction (or if it's already edit)\r\n\t\tif(!newElems[index2].instruction) {\r\n\t\t\tnewElems[index2].instruction = 'edit';\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\telements: newElems\r\n\t\t})\r\n\t},\r\n\r\n\tgetContent: function() {\r\n\r\n\t},\r\n\r\n\t// Add text element\r\n\taddText: function() {\r\n\t\tvar newElem = {\r\n\t\t\tid: 'n' + this.elemsAdded,\r\n\t\t\ttype: 'text',\r\n\t\t\tcontent: '',\r\n\t\t\tsize: 16,\r\n\t\t\tlanguage: 'NULL',\r\n\t\t\tinstruction: 'add',\r\n\t\t\tposition: this.state.elements.length\r\n\t\t}\r\n\t\tvar newElems = this.state.elements;\r\n\t\tnewElems.push(newElem);\r\n\t\tthis.setState({\r\n\t\t\telements: newElems\r\n\t\t});\r\n\t\tthis.elemsAdded += 1;\r\n\t},\r\n\r\n\taddImages: function(images) {\r\n\r\n\t\tvar newElems = this.state.elements;\r\n\r\n\t\tfor (var i = 0; i < images.length; i++) {\r\n\r\n\t\t\tvar newId = 'n' + this.elemsAdded;\r\n\r\n\t\t\tvar newElem = {\r\n\t\t\t\tid: newId,\r\n\t\t\t\ttype: 'img',\r\n\t\t\t\tcontent: '/img/loading.gif',\r\n\t\t\t\tsize: 1,\r\n\t\t\t\tlanguage: 'NULL',\r\n\t\t\t\tinstruction: 'add',\r\n\t\t\t\tposition: newElems.length\r\n\t\t\t}\r\n\t\t\tnewElems.push(newElem);\r\n\t\t\tthis.elemsAdded += 1;\r\n\r\n\t\t\t// save the file\r\n\t\t\tthis.formData.set(newId, images[i]);\r\n\r\n\t\t\t//preview the newly uploaded image\r\n\t\t\tvar reader = new FileReader();\r\n\t\t    reader.readAsDataURL(images[i]);\r\n\t\t    reader.onload = this.newImgLoaded.bind(this, newElems.length-1); \r\n\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\telements: newElems\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tnewImgLoaded: function(index, e) {\r\n\r\n\t\tvar newElems = this.state.elements;\r\n\t\tnewElems[index].content = e.target.result;\r\n\r\n\t\tthis.setState({\r\n\t\t\telements: newElems\r\n\t\t});\r\n\r\n\t},\r\n\r\n\t//Submit changes\r\n\tsubmit: function() {\r\n\t\tconsole.log('Submit to server');\r\n\t\tvar changes = this.state.elements.filter(function(elem) {\r\n\t\t\treturn elem.instruction\r\n\t\t});\r\n\r\n\t\t//get the page id from hidden input\r\n\t\tvar pageId = document.getElementById('pageId').value;\r\n\t\tthis.formData.set('pageId', pageId);\r\n\r\n\t\tthis.formData.set('content', JSON.stringify(changes));\r\n\r\n\t\tvar method = \"PATCH\";\t//hardcode to edit\r\n\r\n\t\t$.ajax({\r\n\t\t    type: method,\r\n\t\t    url: '/page',\r\n\t\t    // The key needs to match your method's input parameter (case-sensitive).\r\n\t\t    data: this.formData,\r\n\t\t\tprocessData: false,\r\n\t\t\tcontentType: false,\r\n\t\t    // success: DOM.refresh,\r\n\t\t    error: function(errMsg) {\r\n\t\t    \tconsole.log(errMsg);\r\n\t\t        alert('There was a problem updating this page. Please contact support.');\r\n\t\t        // DOM.refresh();\r\n\t\t    }\r\n\t\t});\t\r\n\r\n\t},\r\n\r\n\trender: function() {\r\n\t\treturn(\r\n\r\n\t\t\t<div>\r\n\t\t\t\t<div className='controls'>\r\n\t\t\t\t\t<h4><a href=\"/\">Home</a></h4>\t\t\t\t\t\r\n\t\t\t\t\t<p className='btn' onClick={this.addText}>Add text</p>\r\n\t\t\t\t\t<ImageUploadButton onChange={this.addImages}>Add Images</ImageUploadButton>\r\n\t\t\t\t\t<p id=\"update\" className='btn' onClick={this.submit}>Save</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<DraggableList className='contentList' onReOrder={this.onReOrderElems}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.elements.map(function(elem, i) {\r\n\t\t\t\t\t\t\tif(elem.type == 'text') {\r\n\t\t\t\t\t\t\t\treturn <TextElem key={elem.id} index={i} sizeRange={this.textSizes} \r\n\t\t\t\t\t\t\t\t onChange={this.onChange} elemDesc={elem} />\r\n\t\t\t\t\t\t\t} else if(elem.type == 'img') {\r\n\t\t\t\t\t\t\t\treturn <ImgElem key={elem.id} index={i} sizeRange={this.imgSizes} \r\n\t\t\t\t\t\t\t\t onChange={this.onChange} onFileUpload={this.changeFile}\r\n\t\t\t\t\t\t\t     loadingSrc='/img/loading.gif' elemDesc={elem} />\r\n\t\t\t\t\t\t\t} else if(elem.type == 'video') {\r\n\t\t\t\t\t\t\t\treturn <VideoElem key={elem.id} index={i} sizeRange={this.imgSizes} \r\n\t\t\t\t\t\t\t\t onChange={this.onChange} onFileUpload={this.changeFile}\r\n\t\t\t\t\t\t\t\t loadingSrc='/img/loading.gif' videoFormats={this.videoFormats} \r\n\t\t\t\t\t\t\t\t videoPlaceholder='/img/video.png' elemDesc={elem} />\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t \t}.bind(this))\r\n\t\t\t\t\t}\r\n\t\t\t\t</DraggableList>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nReactDOM.render(<PageWrapper />, document.getElementById('container'));\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./jsx/page.jsx\n **/","// For this to work you need to add {...this.props.dragProps} to the childrens root node in their render method\r\n\r\nvar DraggableList = React.createClass({\r\n\tpropTypes: {\r\n\t\tonReOrder: React.PropTypes.func.isRequired,\r\n\t\tonDrop: React.PropTypes.func,\r\n\t\tclassName: React.PropTypes.string\r\n\t},\r\n\tdefaultProps: {\r\n\t\tclassName: ''\r\n\t},\r\n\tdragstart: function(index, e) {\r\n\t\te.target.style.opacity = 0.5;\r\n\t\tthis.draggedIndex = index;\r\n\t},\r\n\r\n\tdragover: function(index, e) {\r\n\t\tif(this.draggedIndex != null) {\r\n\t\t\tvar thisRect = e.target.getBoundingClientRect();\r\n\t\t\tif((e.clientY < thisRect['top'] + 0.5 * thisRect['height'] && this.draggedIndex > index) \r\n\t\t\t|| (e.clientY >= thisRect['top'] + 0.5 * thisRect['height'] && this.draggedIndex < index)) {\r\n\t\t\t\tthis.props.onReOrder(this.draggedIndex, index);\r\n\t\t\t\tthis.draggedIndex = index;\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tdragend: function(e) {\r\n\t\tif(this.draggedIndex != null) {\r\n\t\t\te.target.style.opacity = 1;\r\n\t\t\tthis.draggedIndex = null;\r\n\t\t}\r\n\t\tif(this.props.onDrop) {\r\n\t\t\tthis.props.onDrop();\r\n\t\t}\r\n\t},\r\n\trender: function() {\r\n\r\n\t\t//Add drag event props to children\r\n\t\tconst childrenWithProps = React.Children.map(this.props.children,\r\n\t\t\t(child, index) => React.cloneElement(child, {\r\n\t\t\t\tdragProps: {\r\n\t\t\t\t\tonDragStart: this.dragstart.bind(this, index), //\tchild.key?\t||\t\r\n\t\t\t\t\tonDragOver: this.dragover.bind(this, index), //\tchild.key?\t||\t\r\n\t\t\t\t\tonDragEnd: this.dragend,\r\n\t\t\t\t\tdraggable: 'true'\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t})\r\n\t    );\r\n\t\treturn(\r\n\t\t\t<div className={this.props.className}>{childrenWithProps}</div>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nmodule.exports = DraggableList;\n\n\n/** WEBPACK FOOTER **\n ** ./jsx/draggableList.jsx\n **/","// Mixins\r\nvar ElemMixin = {\r\n\tonSizeChange: function(e) {\r\n\t\tvar newDesc = this.props.elemDesc;\r\n\r\n\t\t//change descriptions value and instruction\r\n\t\tnewDesc.size = e.target.value;\r\n\t\tif(newDesc.instruction != 'add') {\r\n\t\t\tnewDesc.instruction = 'edit';\r\n\t\t}\r\n\r\n\t\tthis.props.onChange(this.props.index, newDesc);\r\n\t},\r\n\tonLangChange: function(e) {\r\n\t\tvar newDesc = this.props.elemDesc;\r\n\r\n\t\t//change descriptions value and instruction\r\n\t\tnewDesc.language = e.target.value;\r\n\t\tif(newDesc.instruction != 'add') {\r\n\t\t\tnewDesc.instruction = 'edit';\r\n\t\t}\r\n\r\n\t\tthis.props.onChange(this.props.index, newDesc);\r\n\t},\r\n\tonDelete: function() {\r\n\t\tvar newDesc = this.props.elemDesc;\r\n\r\n\t\tconsole.log(this.props.elemDesc.instruction);\r\n\r\n\t\tif (newDesc.instruction == 'delete') {\t//toggle the delete off\r\n\r\n\t\t\tconsole.log(newDesc.instruction_old);\r\n\r\n\t\t\t//if there's an old instruction re-instate this, otherwise remove the instruction \r\n\t\t\tif(newDesc.instruction_old) {\r\n\t\t\t\tnewDesc.instruction = newDesc.instruction_old;\r\n\t\t\t\tdelete newDesc.instruction_old;\r\n\t\t\t} else {\r\n\t\t\t\tdelete newDesc.instruction;\r\n\t\t\t}\r\n\r\n\t\t} else if (newDesc.instruction == 'edit') {\t//replace edit instruction but remember it incase we revert\r\n\t\t\tnewDesc.instruction_old = newDesc.instruction;\r\n\t\t\tnewDesc.instruction = 'delete';\r\n\t\t// } else if (newElems[index].instruction == 'add') {\t//if it's new just remove it\r\n\t\t\t// newElems.splice(index, 1);\r\n\t\t} else {\r\n\t\t\tnewDesc.instruction = 'delete';\r\n\t\t}\r\n\r\n\t\tthis.props.onChange(this.props.index, newDesc);\r\n\t}\r\n}\r\n// <img src=\"{{ contentDirectory + content.content.replace('.jpg', '_x' + previewSize + '.jpg') }}\" draggable=\"false\"  />\r\n// \t\t\t\t\t\t<input type=\"file\" class='hidden' accept=\"image/*\" />\r\n\r\n\r\nvar TextElem = new React.createClass({\r\n\tmixins: [ElemMixin],\r\n\tpropTypes: {\r\n\t\telemDesc: React.PropTypes.shape({\r\n\t\t\tid: React.PropTypes.number.isRequired,\r\n\t\t\tcontent: React.PropTypes.string.isRequired,\r\n\t\t\tsize: React.PropTypes.oneOfType([\r\n\t\t\t\tReact.PropTypes.string,\r\n\t\t\t\tReact.PropTypes.number\r\n\t\t\t]),\r\n\t\t\tlanguage: React.PropTypes.string.isRequired,\r\n\t\t\tinstruction: React.PropTypes.string,\r\n\t    }).isRequired,\t\r\n\r\n\t\tsizeRange: React.PropTypes.array.isRequired,\r\n\t\tonChange: React.PropTypes.func.isRequired\r\n\r\n\t},\r\n\tonChange: function(e) {\r\n\t\tvar newDesc = this.props.elemDesc;\r\n\r\n\t\t//change descriptions value and instruction\r\n\t\tnewDesc.content = e.target.value;\r\n\t\tif(newDesc.instruction != 'add') {\r\n\t\t\tnewDesc.instruction = 'edit';\r\n\t\t}\r\n\r\n\t\tthis.props.onChange(this.props.index, newDesc);\r\n\t},\r\n\tcomponentDidMount: function() {\r\n\t\tconsole.log(this.props.elemDesc.instruction);\r\n\t\tif(this.props.elemDesc.instruction == 'add') {\r\n\t\t\tconsole.log('set the focus');\r\n\t\t\tReactDOM.findDOMNode(this.refs.textArea).focus();\r\n\t\t}\r\n\t},\r\n\t//this stops the text area being draggable and therefor highlightable\r\n\tpreventDefault: function(e) {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t},\r\n\r\n\trender: function() {\r\n\r\n\t\tvar elemDesc = this.props.elemDesc;\r\n\r\n\t\tvar className = elemDesc.instruction ? 'content ' + elemDesc.instruction : 'content';\r\n\t\tvar deleteText = (elemDesc.instruction && elemDesc.instruction == 'delete') ? 'Undelete' : 'Delete';\r\n\r\n\t\t// ...dragProps are those appended by the draggable list\r\n\r\n\t\treturn(\r\n\t\t\t<div className={className} {...this.props.dragProps}>\r\n\t\t\t\t<textarea ref='textArea' value={elemDesc.content} onChange={this.onChange} draggable='true' onDragStart={this.preventDefault} />\r\n\r\n\t\t\t\t{ /*size select input*/ }\r\n\t\t\t\t<SizeSelect value={elemDesc.size} range={this.props.sizeRange} onChange={this.onSizeChange} />\r\n\r\n\t\t  \t\t{/*Language select input*/}\r\n\t\t\t\t<LangSelect value={elemDesc.language} onChange={this.onLangChange} />\r\n\r\n\t\t  \t\t<span onClick={this.onDelete}>{deleteText}</span>\r\n\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nvar ImgElem = new React.createClass({\r\n\tmixins: [ElemMixin],\r\n\tpropTypes: {\r\n\t\telemDesc: React.PropTypes.shape({\r\n\t\t\tid: React.PropTypes.oneOfType([\r\n\t\t\t\tReact.PropTypes.number.isRequired,\r\n\t\t\t\tReact.PropTypes.string.isRequired\r\n\t\t\t]),\r\n\t\t\tcontent: React.PropTypes.string.isRequired,\r\n\t\t\tsize: React.PropTypes.oneOfType([\r\n\t\t\t\tReact.PropTypes.string,\r\n\t\t\t\tReact.PropTypes.number\r\n\t\t\t]),\r\n\t\t\tlanguage: React.PropTypes.string.isRequired,\r\n\t\t\tinstruction: React.PropTypes.string,\r\n\t    }).isRequired,\r\n\r\n\t\tsizeRange: React.PropTypes.array.isRequired,\r\n\r\n\t\tonChange: React.PropTypes.func.isRequired,\r\n\t\tonFileUpload: React.PropTypes.func.isRequired\r\n\r\n\t},\r\n\tgetInitialState: function() {\r\n\t\treturn({\r\n\t\t\ttempImg: null\r\n\t\t})\r\n\t},\r\n\tcomponentDidMount: function() {\r\n\t\tif(this.props.elemDesc.instruction == 'add') {\r\n\t\t\t$('html, body').animate({\r\n\t\t        scrollTop: $(ReactDOM.findDOMNode(this.refs.RootElem)).offset().top\r\n\t\t    }, 500);\r\n\t\t}\r\n\t},\r\n\tonImgClick: function(e) {\r\n\t\t//the image acts as a psuedo input, when click, passed the click to the actual input\r\n\t\t$(e.target).siblings('input.hidden').click();\r\n\t},\r\n\r\n\tonChange: function(e) {\r\n\r\n\t\t// show the loading gif while the image is loading for preview\r\n\t\tthis.setState({\r\n\t\t\ttempImg: this.props.loadingSrc\r\n\t\t})\r\n\r\n\t\t\r\n\t\t//set the new instruction as edit\r\n\t\tvar newDesc = this.props.elemDesc;\r\n\t\tnewDesc.instruction = 'edit';\r\n\r\n\t\tthis.props.onChange(this.props.index, newDesc);\r\n\r\n\t\t//send the new file\r\n\t\tvar file = e.target.files[0];\r\n\t\tthis.props.onFileUpload(newDesc.id, file);\r\n\r\n\t\t//preview the newly uploaded image\r\n\t\tvar reader = new FileReader();\r\n\t    reader.readAsDataURL(file);\r\n\t    reader.onload = function(e) {\r\n\r\n\t    \tthis.setState({\r\n\t\t\t\ttempImg: e.target.result\r\n\t\t\t});\r\n\r\n\r\n\t    }.bind(this); \r\n\t},\r\n\r\n\trender: function() {\r\n\r\n\t\tvar elemDesc = this.props.elemDesc;\r\n\r\n\t\tvar className = elemDesc.instruction ? 'content ' + elemDesc.instruction : 'content';\r\n\t\tvar deleteText = (elemDesc.instruction && elemDesc.instruction == 'delete') ? 'Undelete' : 'Delete';\r\n\r\n\t\t// the source can be one of 3 things\r\n\t\tvar src;\r\n\t\tif(this.state.tempImg) {\t//a loading gif for when the previewing image is rendering\r\n\t\t\tsrc = this.state.tempImg;\r\n\t\t} else {\t//or the image passed down by props\r\n\t\t\tsrc = elemDesc.content;\r\n\t\t}\r\n\r\n\t\t\r\n\t\t// ...dragProps are those appended by the draggable list\r\n\t\treturn(\r\n\t\t\t<div className={className} {...this.props.dragProps} ref='RootElem' >\r\n\t\t\t\t\r\n\t\t\t\t<img src={src} draggable=\"false\" onClick={this.onImgClick} />\r\n\t\t\t\t<input type=\"file\" className='hidden' accept=\"image/*\" onChange={this.onChange} />\r\n\r\n\t\t\t\t{ /*size select input*/ }\r\n\t\t\t\t<SizeSelect value={elemDesc.size} range={this.props.sizeRange} onChange={this.onSizeChange} />\r\n\r\n\t\t  \t\t{/*Language select input*/}\r\n\t\t\t\t<LangSelect value={elemDesc.language} onChange={this.onLangChange} />\r\n\r\n\t\t  \t\t<span onClick={this.onDelete}>{deleteText}</span>\r\n\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n});\r\n\r\nvar VideoElem = new React.createClass({\r\n\tmixins: [ElemMixin],\r\n\tpropTypes: {\r\n\t\telemDesc: React.PropTypes.shape({\r\n\t\t\tid: React.PropTypes.number.isRequired,\r\n\t\t\tcontent: React.PropTypes.string.isRequired,\r\n\t\t\tsize: React.PropTypes.oneOfType([\r\n\t\t\t\tReact.PropTypes.string,\r\n\t\t\t\tReact.PropTypes.number\r\n\t\t\t]),\r\n\t\t\tlanguage: React.PropTypes.string.isRequired,\r\n\t\t\tinstruction: React.PropTypes.string,\r\n\t    }).isRequired,\r\n\r\n\t\tsizeRange: React.PropTypes.array.isRequired,\r\n\r\n\t\tonChange: React.PropTypes.func.isRequired,\r\n\t\tonFileUpload: React.PropTypes.func.isRequired,\r\n\r\n\t\tvideoFormats: React.PropTypes.array.isRequired,\r\n\r\n\t},\r\n\tgetInitialState: function() {\r\n\t\treturn({\r\n\t\t\ttempImg: null\r\n\t\t})\r\n\t},\r\n\tonVidClick: function(e) {\r\n\t\t//the image acts as a psuedo input, when click, passed the click to the actual input\r\n\t\t$(e.target).siblings('input.hidden').click();\r\n\t},\r\n\r\n\tonChange: function(e) {\r\n\r\n\t\t// show the loading gif while the image is loading for preview\r\n\t\tthis.setState({\r\n\t\t\ttempImg: this.props.loadingSrc\r\n\t\t})\r\n\t\t\r\n\t\t//set the new instruction as edit\r\n\t\tvar newDesc = this.props.elemDesc;\r\n\t\tnewDesc.instruction = 'edit';\r\n\r\n\t\tthis.props.onChange(this.props.index, newDesc);\r\n\r\n\t\t//send the new file\r\n\t\tvar file = e.target.files[0];\r\n\t\tthis.props.onFileUpload(newDesc.id, file);\r\n\r\n\t\t//preview the video placeholder image\r\n    \tthis.setState({\r\n\t\t\ttempImg: this.props.videoPlaceholder\r\n\t\t})\r\n\t},\r\n\r\n\trender: function() {\r\n\r\n\t\tvar elemDesc = this.props.elemDesc;\r\n\r\n\t\tvar className = elemDesc.instruction ? 'content ' + elemDesc.instruction : 'content';\r\n\t\tvar deleteText = (elemDesc.instruction && elemDesc.instruction == 'delete') ? 'Undelete' : 'Delete';\r\n\r\n\t\tconsole.log(this.state.tempImg);\r\n\r\n\t\tvar displayElem;\r\n\t\t// if it's a new video, it's too heavy on the DOM to preview, so just show a placeholder img\r\n\t\tif(this.state.tempImg) {\r\n\t\t\tdisplayElem = (<img src={this.state.tempImg} onClick={this.onVidClick} />)\r\n\t\t} else {\r\n\t\t\tdisplayElem = (<video controls onClick={this.onVidClick} >\r\n\t\t\t\t{\t\r\n\t\t\t\t\tthis.props.videoFormats.map(function(format) {\r\n\t\t\t\t\t\treturn <source key={format.ext} src={elemDesc.content + '.' + format.ext} type={'video/' + format.ext} />\r\n\t\t\t\t\t}.bind(this))\r\n\t\t\t\t}\r\n\t  \t\t</video>)\r\n\t\t}\r\n\r\n\t\treturn(\r\n\t\t\t<div className={className} {...this.props.dragProps}>\r\n\r\n\t\t\t\t{displayElem}\r\n\t\t\t\t\r\n\t\t\t\t<input type=\"file\" className='hidden' accept=\"video/*\" onChange={this.onChange} />\r\n\r\n\t\t\t\t{ /*size select input*/ }\r\n\t\t\t\t<SizeSelect value={elemDesc.size} range={this.props.sizeRange} onChange={this.onSizeChange} />\r\n\r\n\t\t  \t\t{/*Language select input*/}\r\n\t\t\t\t<LangSelect value={elemDesc.language} onChange={this.onLangChange} />\r\n\r\n\t\t  \t\t<span onClick={this.onDelete}>{deleteText}</span>\r\n\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n});\r\n\r\n\r\n// Shared compontents\r\nvar SizeSelect = React.createClass({\r\n\tpropTypes: {\r\n\t\tvalue: React.PropTypes.oneOfType([\r\n\t\t\tReact.PropTypes.string,\r\n\t\t\tReact.PropTypes.number\r\n\t\t]),\r\n\t\trange: React.PropTypes.array.isRequired,\r\n\t\tonChange: React.PropTypes.func.isRequired\r\n\r\n\t},\r\n\trender: function() {\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t<span>Size</span>\r\n\t\t\t\t<select value={this.props.value} onChange={this.props.onChange}>\t\t\t\t\t\t\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.range.map(function(size) {\r\n\t\t\t\t\t\t\treturn <option key={size} value={size}>{size}</option>\r\n\t\t\t\t\t \t})\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t  \t\t</select>\r\n\t\t\t</div>\r\n\t\t)\t\r\n\t}\r\n})\r\n\r\nvar LangSelect = React.createClass({\r\n\tpropTypes: {\r\n\t\tvalue: React.PropTypes.string,\r\n\t\tonChange: React.PropTypes.func.isRequired\r\n\t},\r\n\trender: function() {\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t<span>Language</span>\r\n\t\t  \t\t<select value={this.props.value} onChange={this.props.onChange}>\r\n\t\t  \t\t\t<option value='NULL'>All</option>\r\n\t\t  \t\t\t<option value='eng'>English</option>\r\n\t\t  \t\t\t<option value='ita'>Italian</option>\r\n\t\t  \t\t</select>\r\n\t\t\t</div>\r\n\t\t)\t\r\n\t}\r\n})\r\n\r\nmodule.exports.TextElem = TextElem;\r\nmodule.exports.ImgElem = ImgElem;\r\nmodule.exports.VideoElem = VideoElem;\n\n\n/** WEBPACK FOOTER **\n ** ./jsx/Elems.jsx\n **/","var ImageUploadButton = React.createClass({\r\n\tpropTypes: {\r\n\t\tonChange: React.PropTypes.func.isRequired\r\n\t},\r\n\tonClick: function() {\r\n\t\tReactDOM.findDOMNode(this.refs.fileInput).click();\r\n\t},\r\n\tonChange: function(e) {\r\n\t\tthis.props.onChange(e.target.files);\r\n\t},\r\n\trender: function() {\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t<p onClick={this.onClick} className='btn'>{this.props.children}</p>\r\n\t\t\t\t<input ref='fileInput' onChange={this.onChange} type=\"file\" className='hidden' multiple accept=\"image/*\" />\r\n\t\t\t</div>\r\n\t\t)\t\r\n\t}\r\n})\r\n\r\n\r\nmodule.exports.ImageUploadButton = ImageUploadButton;\n\n\n/** WEBPACK FOOTER **\n ** ./jsx/toolBox.jsx\n **/"],"sourceRoot":""}